(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{113:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(54),s=n(149),c=n(147),l=n(82),u=n(76),d=function(){function t(t){this._navigator=t}var e;return t.prototype.goToTimeTrip=function(){this._navigator.nativeElement.pushPage(u.TimeTrip,{data:{year:2018,LocationID:"a002"}})},t.prototype.goToMap=function(){this._navigator.nativeElement.pushPage(s.Map,{data:{hoge:"fuga"}})},t.prototype.goToRegistrationList=function(){this._navigator.nativeElement.pushPage(c.RegistrationList,{data:{hoge:"fuga"}})},t.prototype.goToUpload=function(){this._navigator.nativeElement.pushPage(l.Upload,{data:{hoge:"fuga"}})},t=o([r.Component({selector:"ons-page[title='menu']",template:n(190),styles:["\n  \n  .content{\n    background-color:#f9d3d3;\n  }\n  .menu_title{\n    text-align:center;\n    font-family:Impact;\n    font-size:50px;\n    color:brown;\n    margin:40px 0 100px 0;\n  }\n\n  .content ons-button{\n    width:120px;\n    height:90px;\n    line-height: 20px;\n    margin:10px;\n    padding-top:10px;\n  }\n\n  .material-icons{\n    font-size:40px;\n  }\n\n  .menu_btn_Time_Trip{\n    background-color:#ffb553;\n  }\n\n  .menu_btn_Registrations{\n    background-color:#4bb5e0;\n  }\n\n  .menu_btn_map{\n    background-color:#ff716e;\n  }\n\n  .menu_btn_Upload{\n    background-color:#34314b;\n  }\n  "]}),i("design:paramtypes",["function"==typeof(e=void 0!==a.OnsNavigator&&a.OnsNavigator)&&e||Object])],t)}();e.Menu=d},146:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(143),s=function(){function t(t){this.http=t}var e;return t.prototype.GetJson=function(t){var e="initData/"+t+".json";return this.http.get(e)},t=o([r.Injectable(),i("design:paramtypes",["function"==typeof(e=void 0!==a.HttpClient&&a.HttpClient)&&e||Object])],t)}();e.GetJsonService=s},147:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=n(76),l=n(54),u=n(67),d=function(){function t(t,e){this._navigator=t,this._indexedDbService=e,this.RegistrationLists=[]}var e,d;return t.prototype.ngOnInit=function(){return r(this,void 0,void 0,function(){return a(this,function(t){return this.getRegistList(),[2]})})},t.prototype.getRegistList=function(){return r(this,void 0,void 0,function(){var t,e=this;return a(this,function(n){switch(n.label){case 0:return[4,this._indexedDbService.getTrnPhotoInfo()];case 1:return null==(t=n.sent())?(console.log("データを取得できなかった"),t=[]):t.forEach(function(t){e.RegistrationLists.push({PhotoId:t.PhotoID,Year:t.Year,LocationID:t.LocationID,Title:t.Title,Comment:t.Comment,Bin:t.Bin,LastUpdateDate:t.LastUpdateDate})}),[2]}})})},t.prototype.clickPhoto=function(t,e){this._navigator.nativeElement.pushPage(c.TimeTrip,{data:{PhotoId:e,LocationID:t}}),console.log("クリックしたLocationID"+t),console.log("クリックしたPhotoId"+e)},t=o([s.Component({selector:"ons-page[title='registrationList']",template:n(191),styles:["\n    .registration_title{\n      font-size:20px;\n      font-weight:bold;\n    }\n    .registration_comment{\n      font-size:14px; \n    }\n    .dataPicArea {\n      width:70%;\n    }\n    .dataMemoArea {\n      width:30%;\n    }\n    .dataMemoArea-title {\n      margin-left:5px;\n      margin-right:20px;\n      //font-size:16px;\n      font-weight:700;\n    }\n    .dataMemoArea-text {\n      margin-left:5px;\n      margin-right:20px;\n      //font-size:10px;\n    }\n    "]}),i("design:paramtypes",["function"==typeof(e=void 0!==l.OnsNavigator&&l.OnsNavigator)&&e||Object,"function"==typeof(d=void 0!==u.IndexedDbService&&u.IndexedDbService)&&d||Object])],t)}();e.RegistrationList=d},148:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(153),c=n(83),l=function(t){function e(e){var n=t.call(this,e)||this;return n._db=e,n}var n;return o(e,t),e.prototype.where=function(t,e){return this._db.table(t).where(e)},e=i([a.Injectable(),r("design:paramtypes",["function"==typeof(n=void 0!==c.DexieDatabase&&c.DexieDatabase)&&n||Object])],e)}(s.DexieService);e.DexieServiceEx=l},149:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(16),c=n(82),l=n(76),u=n(54),d=n(0),f=n(145),p=n(67),h=function(){function t(t,e){this._navigator=t,this._indexedDbService=e,this.markers=[],this.markerPin1=n(196),this.markerPin2=n(195),this.iconPathTrip=n(194),this.iconPathRegist=n(193)}var e,h;return t.prototype.ngOnInit=function(){return r(this,void 0,void 0,function(){return a(this,function(t){return this.getGeo(),[2]})})},t.prototype.getGeo=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(n){return t={timeout:6e3},e=this,navigator.geolocation.getCurrentPosition(function(t){e.presentLat=t.coords.latitude,e.presentLng=t.coords.longitude,e.presentLat=42.319744,e.presentLng=140.986007,e.changeCenter(e.presentLat,e.presentLng),e.getMapData(e.centerLat,e.centerLng),e.displayPin()},function(){s.notification.alert({message:"現在地を取得できるように設定してください。",title:"現在地が取得できません",callback:function(){e.presentLat=42.319744,e.presentLng=140.986007,e.changeCenter(e.presentLat,e.presentLng)}})},t),[2]})})},t.prototype.displayPin=function(){this.apiWrapper=new f.GoogleMapsAPIWrapper(this.apiLoader,this.zone),this.apiWrapper.getCenter().then(function(t){console.log(t)}).catch(function(t){console.log(t)})},t.prototype.clickMap=function(t){this.lastClicklat=t.coords.lat,this.lastClicklng=t.coords.lng,console.log("最後にクリックしたx座標"+this.lastClicklat.toString()),console.log("最後にクリックしたy座標"+this.lastClicklng.toString())},t.prototype.clickMarker=function(t){this.locationID=t.LocationID,t.iconUrl=this.markerPin2,this.changeCenter(t.Latitude,t.Longitude)},t.prototype.changeCenter=function(t,e){this.centerLat=t,this.centerLng=e},t.prototype.getMapData=function(t,e){return r(this,void 0,void 0,function(){var n,o=this;return a(this,function(i){switch(i.label){case 0:return[4,this._indexedDbService.getMstLocationByRange(t,e)];case 1:return null==(n=i.sent())?(console.log("データが取得できなかった"),this.markers=[]):n.forEach(function(t){alert(t.Title),alert("こもじ"+t.title),alert(t.Address),o.markers.push({LocationID:t.LocationID,Title:t.Title,Address:t.Address,Latitude:t.Latitude,Longitude:t.Longitude,iconUrl:o.markerPin1})}),[2]}})})},t.prototype.goToTimeTrip=function(){void 0==this.locationID?this.alertNonSelectPin():this._navigator.nativeElement.pushPage(l.TimeTrip,{data:{LocationID:this.locationID}})},t.prototype.goToUpload=function(){void 0==this.locationID?this.alertNonSelectPin():this._navigator.nativeElement.pushPage(c.Upload,{data:{LocationID:this.locationID,Address:this.address}})},t.prototype.alertNonSelectPin=function(){s.notification.alert({message:"ピンを一つ選んでください。",title:"ピンを選択してください。"})},t=o([d.Component({selector:"ons-page[title='map']",template:n(192),styles:["\n  .map_area {\n    height:90%;\n  }\n  agm-map {\n    height: 90%;\n  }\n  .btn_area {\n    height:10%;\n    width:100%;\n    display:inline-bock;\n  }\n  .btn_area img {\n    height: 100%;\n  }\n  .btn_icon_style {\n    height: 100%;\n    width:33.3333%;\n    background-color:transparent;\n  }\n  .btn_icon_style_left {\n    text-align: left;\n  }\n  .btn_icon_style_center {\n    text-align: center;\n  }\n  .btn_icon_style_right {\n    text-align: right;\n  }\n  "]}),i("design:paramtypes",["function"==typeof(e=void 0!==u.OnsNavigator&&u.OnsNavigator)&&e||Object,"function"==typeof(h=void 0!==p.IndexedDbService&&p.IndexedDbService)&&h||Object])],t)}();e.Map=h},156:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=156},188:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(34),n(142),n(0),n(155),n(54)},189:function(t,e){t.exports="<ons-navigator animation=slide swipeable [page]=initialPage></ons-navigator> "},190:function(t,e){t.exports=" <ons-toolbar> <div class=center>Menu</div> </ons-toolbar> <div class=content> <div class=menu_title> Time Trip <br> Photo Gallery </div> <div id=message>{{msg}}</div> <div style=text-align:center;margin:10px> <ons-button (click)=goToTimeTrip(navi) class=menu_btn_Time_Trip> <i class=material-icons>restore</i><br>Time Trip </ons-button> <ons-button (click)=goToRegistrationList(navi) class=menu_btn_Registrations> <i class=material-icons>view_list</i><br>Registrations </ons-button> <br> <ons-button (click)=goToMap(navi) class=menu_btn_map> <i class=material-icons>place</i><br>Map </ons-button> <ons-button (click)=goToUpload(navi) class=menu_btn_Upload> <i class=material-icons>arrow_upward</i><br>Upload </ons-button> </div> </div> "},191:function(t,e){t.exports='<ons-toolbar> 　 <div class=left><ons-back-button>Back</ons-back-button></div> <div class=center>登録一覧</div> </ons-toolbar> <div class=content> <ons-list> <ons-list-item modifier=chevron tappable *ngFor="let Registration of RegistrationLists" [value]=Registration.Title (click)=clickPhoto(Registration.LocationID,Registration.PhotoId)> <img [src]=Registration.Bin alt=Registration.Title class=dataPicArea> <div class=dataMemoArea> <p class=dataMemoArea-title>{{ Registration.Title }}</p><p class=dataMemoArea-text>{{ Registration.Comment }}</p> </div> </ons-list-item> </ons-list> </div>'},192:function(t,e){t.exports='<ons-toolbar> <div class=left><ons-back-button>Back</ons-back-button></div> <div class=center>地図から探す</div> </ons-toolbar> <agm-map [latitude]=centerLat [longitude]=centerLng [zoom]=15 [disableDoubleClickZoom]=true (mapDblClick)=clickMap($event)> <agm-marker [latitude]=lastClicklat [longitude]=lastClicklng [iconUrl]="{\n      url:markerPin1,\n      scaledSize: {\n      width: 40,\n      height: 40\n      }\n    }" [label]="{\n      text: \'タップしたマーカー\',\n      fontSize: \'10px\',\n      fontWeight: \'700\'\n    }\n  "> <agm-info-window> <table> <tr> <td>x座標：</td> <td>{{lastClicklat}}</td> </tr> <tr> <td>y座標：</td> <td>{{lastClicklng}}</td> </tr> </table> </agm-info-window> </agm-marker> <agm-marker *ngFor="let m of markers;" [latitude]=m.Latitude [longitude]=m.Longitude [label]="{\n      text: m.Title,\n      fontSize: \'10px\',\n      fontWeight: \'700\'\n    }" [iconUrl]="{\n      url:m.iconUrl,\n      scaledSize: {\n      width: 40,\n      height: 40\n      }\n    }" (markerClick)=clickMarker(m)> <agm-info-window> <table> <tr> <td>名称：</td> <td>{{m.Title}}</td> </tr> <tr> <td>住所：</td> <td>{{m.Address}}</td> </tr> <tr> <td>x座標：</td> <td>{{m.Latitude}}</td> </tr> <tr> <td>y座標：</td> <td>{{m.Longitude}}</td> </tr> </table> </agm-info-window> </agm-marker> <agm-marker [latitude]=presentLat [longitude]=presentLng [iconUrl]="{\n        url:markerPin1,\n        scaledSize: {\n        width: 40,\n        height: 40\n        }\n      }" [label]="{\n        text: \'現在地\',\n        fontSize: \'10px\',\n        fontWeight: \'700\'\n      }\n      "> </agm-marker> </agm-map> <div class=btn_area> <ons-button class="btn_icon_style btn_icon_style_left"></ons-button> <ons-button (click)=goToTimeTrip() class="btn_icon_style btn_icon_style_center"><img [src]=iconPathTrip alt=TimeTrip画面へ></ons-button> <ons-button (click)=goToUpload() class="btn_icon_style btn_icon_style_right"><img [src]=iconPathRegist alt=画像アップロード画面へ></ons-button> </div> '},193:function(t,e,n){t.exports=n.p+"assets/goToRegist.e6408eb43131e10fcaf57ee90c1c9488.png"},194:function(t,e,n){t.exports=n.p+"assets/goToTrip.d7137d78c91ba535577c30d3e75e9e65.png"},195:function(t,e,n){t.exports=n.p+"assets/pin_free.ebb5f291dbc61d273ebd424c1e023730.svg"},196:function(t,e,n){t.exports=n.p+"assets/pin_normal.a95f5ce6beecd1fe98d6bbf18e978ebc.svg"},197:function(t,e){t.exports="<ons-toolbar> <div class=left><ons-back-button>Back</ons-back-button></div> <div class=center>写真アップロード</div> </ons-toolbar> <div class=content> <ons-list> <ons-list-item style=width:100%> <p><i class=material-icons>home</i>{{ photoAddress }}</p> </ons-list-item> </ons-list> <div id=previewArea> <img #photoPreview id=photoPreview style=width:300px;height:auto;text-align:center> </div> <ons-list> <ons-list-header>いつの写真？</ons-list-header> <ons-list-item> <ons-input type=tel style=width:130px [(value)]=photoYear></ons-input> </ons-list-item> <ons-list-header>写真のコメント</ons-list-header> <ons-list-item> <ons-input type=textarea style=width:100% [(value)]=photoComment></ons-input> </ons-list-item> </ons-list> <div class=footer> <button id=uploadBtn class=btn (click)=uploadPhotoConfirm();> <i class=material-icons>cloud_upload</i> </button> <input id=openPhoto style=display:none accept=image type=file (change)=changePhoto($event) [accept]=inputAccept> <button id=openBtn class=btn onclick='document.getElementById(\"openPhoto\").click()'> <i class=material-icons>insert_photo</i> </button> </div> </div> "},198:function(t,e){t.exports=' <ons-toolbar> <div class=left><ons-back-button>Back</ons-back-button></div> <div class=center>TimeTrip</div> </ons-toolbar> <div class=content> <ons-list> <ons-list-item style=width:100%> <ons-button class=btn (click)=goToMenu(navi)> <i class=material-icons>home</i> </ons-button> <ons-select class=addressSelect [(ngModel)]=locationId (change)=changeAddress($event)> <option *ngFor="let addressItem of addressListDB" [value]=addressItem.LocationID> {{ addressItem.Address }} </option> </ons-select> </ons-list-item> <ons-list-item style=width:100%> <ons-carousel #carousel swipeable auto-scroll id=carousel (postchange)=toPostChane($event)> <ons-carousel-item *ngFor="let item of infoList;let i = index" (click)=openModal(i)> <img class=carousel_photo [src]=item.Bin alt="" (error)="isImgErrList[i] = true"> <div *ngIf=isImgErrList[i] class=carousel_erricon><i class=material-icons>cancel</i></div> </ons-carousel-item> </ons-carousel> </ons-list-item> <ons-list-item> <div align=center style=width:100%> <div class="item title">{{info.Year}} 年</div> <div class="item title">{{info.Title}}</div> <div class=item style=margin-top:50px>{{info.Comment}}</div> <div class=item> <ons-button (click)=goToUpload() class=btn><i class=material-icons>edit</i></ons-button> </div> </div> </ons-list-item> </ons-list> </div> <ons-modal #modal (click)=modal.hide()> <div class=photoModal> <img class=carousel_photo [src]=info.Bin> </div> </ons-modal>'},199:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=n(113),l=n(67),u=n(146),d=function(){function t(t,e){this.indexedDbService=t,this.getJsonService=e,this.initialPage=c.Menu}var e,d;return t.prototype.ngOnInit=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return[4,this.CheckInitData()];case 1:return n.sent()?(console.log("データ初期化するよ"),[4,this.getJsonService.GetJson("MstLocation").toPromise()]):[3,4];case 2:return t=n.sent(),this.indexedDbService.addMultipleLocationInfo(t),[4,this.getJsonService.GetJson("TrnPhoto").toPromise()];case 3:e=n.sent(),this.indexedDbService.addMultiplePhotoInfo(e),this.indexedDbService.cheakedInitData(),n.label=4;case 4:return[2]}})})},t.prototype.CheckInitData=function(){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.indexedDbService.cheakInitData()];case 1:return[2,t.sent()]}})})},t=o([s.Component({selector:"app",template:n(189),styles:["./app.css"]}),i("design:paramtypes",["function"==typeof(e=void 0!==l.IndexedDbService&&l.IndexedDbService)&&e||Object,"function"==typeof(d=void 0!==u.GetJsonService&&u.GetJsonService)&&d||Object])],t)}();e.MyApp=d},206:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),n(205),n(203);var i=n(0),r=n(14),a=n(143),s=n(21),c=n(142),l=n(155),u=n(54),d=n(153),f=n(199),p=n(113),h=n(149),g=n(147),v=n(82),m=n(76),b=n(67),y=n(148),_=n(146),x={databaseName:"TimeTripPhotoGallery",schema:{CheakInitData:"++ID",TrnPhotoInfo:"++PhotoID,Year,LocationID,Comment,Bin,LastUpdateDateTime",MstLocationInfo:"++LocationID,Title,Address,Latitude,Longitude"}},I=n(145);i.enableProdMode();var w=function(){function t(){}return t=o([i.NgModule({imports:[I.AgmCoreModule.forRoot({apiKey:"AIzaSyCju8LIyDfOiDbk53jDrNnW1ifs7F-4tEU"}),u.OnsenModule,l.HttpModule,a.HttpClientModule,r.CommonModule,s.FormsModule,d.DexieModule.forRoot(x)],declarations:[f.MyApp,p.Menu,h.Map,g.RegistrationList,v.Upload,m.TimeTrip],entryComponents:[p.Menu,h.Map,g.RegistrationList,v.Upload,m.TimeTrip],bootstrap:[f.MyApp],providers:[b.IndexedDbService,y.DexieServiceEx,_.GetJsonService],schemas:[i.CUSTOM_ELEMENTS_SCHEMA]})],t)}();c.platformBrowserDynamic().bootstrapModule(w).catch(function(t){return console.error(t)})},396:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(395),n(207)},397:function(t,e,n){n(396),n(206),t.exports=n(188)},67:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=n(148),l=function(){function t(t){this.dexieService=t,this.flg="1",this.CheakInitData="CheakInitData",this.MstLocationInfo="MstLocationInfo",this.TrnPhotoInfo="TrnPhotoInfo"}var e;return t.prototype.cheakInitData=function(){return r(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=null,[4,this.dexieService.getByPrimaryKey(this.CheakInitData,this.flg,function(e){t=e})];case 1:return e.sent(),t?[2,!1]:[2,!0]}})})},t.prototype.cheakedInitData=function(){this.dexieService.addOne(this.CheakInitData,{ID:this.flg})},t.prototype.addMultipleLocationInfo=function(t){this.dexieService.addMultiple(this.MstLocationInfo,t)},t.prototype.addOnePhotoInfo=function(t){return r(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.dexieService.addOne(this.TrnPhotoInfo,t)];case 1:return[2,e.sent()]}})})},t.prototype.addMultiplePhotoInfo=function(t){this.dexieService.addMultiple(this.TrnPhotoInfo,t)},t.prototype.getTrnPhotoInfoByKey=function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return e=null,[4,this.dexieService.getByPrimaryKey(this.TrnPhotoInfo,t,function(t){e=t})];case 1:return n.sent(),[2,e]}})})},t.prototype.getMstLocationInfo=function(){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.dexieService.toArray(this.MstLocationInfo)];case 1:return[2,t.sent()]}})})},t.prototype.getMstLocationByRange=function(t,e){return r(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return n=.015,[4,this.dexieService.where(this.MstLocationInfo,"Latitude").between(t-n,t+n).and(function(t){return e-n<=t.Longitude&&t.Longitude<=e+n})];case 1:return[2,o.sent().toArray()]}})})},t.prototype.getTrnPhotoInfo=function(){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.dexieService.toArray(this.TrnPhotoInfo)];case 1:return[2,t.sent()]}})})},t=o([s.Injectable(),i("design:paramtypes",["function"==typeof(e=void 0!==c.DexieServiceEx&&c.DexieServiceEx)&&e||Object])],t)}();e.IndexedDbService=l},76:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=n(113),l=n(54),u=n(67),d=n(82),f=function(){function t(t,e,n){this._navigator=t,this._indexedDbService=e,this._params=n,this.addressListDB=[{LocationID:"a001",Address:"北海道登別市幌別町３－２０",Latitude:10,longitude:10},{LocationID:"a002",Address:"東京都府中市府中町１－９",Latitude:20,longitude:10},{LocationID:"a003",Address:"岩手県宮古市五月町１－１",Latitude:50,longitude:10}],this.infoListDB=[{PhotoId:"p001",Year:1984,LocationID:"a001",Title:"幌別駅前通り 1984.",Comment:"北口駅前の様子。情調ある風景が感慨を感じさせる。",Bin:"aaa",LastUpdateDate:"20181025"},{PhotoId:"p002",Year:2018,LocationID:"a001",Title:"幌別駅前通り 2018.",Comment:"北口駅前の様子。無機質な町並が現実を実感させる。",Bin:"d82m",LastUpdateDate:"20181025"},{PhotoId:"p003",Year:2050,LocationID:"a001",Title:"幌別駅前通り 2050.",Comment:"北口駅前の様子。人間もペットも電子になりました。",Bin:"k8aa",LastUpdateDate:"20181025"},{PhotoId:"p004",Year:2014,LocationID:"a002",Title:"京王府中一丁目ビル",Comment:"日鋼情報システム(株)が府中市Jタワーより移転した年。",Bin:"sj01",LastUpdateDate:"20181025"},{PhotoId:"p005",Year:2018,LocationID:"a002",Title:"京王府中一丁目ビル",Comment:"日鋼情報システム(株)が本社JSWに吸収合併されることが決定した年。",Bin:"d82m",LastUpdateDate:"20181025"},{PhotoId:"p006",Year:2062,LocationID:"a002",Title:"京王府中一丁目ビル",Comment:"本社JSWが事実上日本を支配した年。",Bin:"k8aa",LastUpdateDate:"20181025"},{PhotoId:"p007",Year:1978,LocationID:"a003",Title:"宮古市魚菜市場　開業",Comment:"宮古市魚菜市場が開業しました。「宮古市をみんなで盛り上げよう」というモットーのもと地元自治体と地元漁師農家の協力によって営業運営される市場です。",Bin:"sj01",LastUpdateDate:"20181025"},{PhotoId:"p008",Year:2019,LocationID:"a003",Title:"宮古市魚菜市場　開業30周年",Comment:"宮古市魚菜市場が開業30周年を迎えました。日本有数の漁場である三陸沖から水揚げされる魚介類と、地元農家が愛情をこめて育てた野菜がずらりと並びます。",Bin:"d82m",LastUpdateDate:"20181025"},{PhotoId:"p009",Year:2088,LocationID:"a003",Title:"宮古市魚菜市場　開業100周年",Comment:"宮古市魚菜市場が開業100周年を迎えました。人類が食事をやめ必要なエネルギーのみをインポートする時代でも、昔と変わらず新鮮な食材を売り続けています。",Bin:"k8aa",LastUpdateDate:"20181025"}],this.address=null,this.locationId="",this.infoList=[],this.info=null,this.targetYear=0,this.activeIndex=0,this.isImgErrList=[]}var e,f,p;return t.prototype.ngOnInit=function(){return r(this,void 0,void 0,function(){var t,e=this;return a(this,function(n){switch(n.label){case 0:return this.targetYear=this._params.data.year,this.locationId=this._params.data.LocationID,this.address=this.addressListDB.find(function(t){return t.LocationID==e.locationId}),this.setInfoList(this.address),this.activeIndex=this.infoList.findIndex(function(t){return t.PhotoId==e.info.PhotoId}),this.carousel.nativeElement.setAttribute("initial-index",this.activeIndex.toString()),[4,this._indexedDbService.getTrnPhotoInfoByKey("1")];case 1:return t=n.sent(),this.infoListDB[0].Bin=t.Bin,this.infoListDB[1].Bin=t.Bin,this.infoListDB[2].Bin=t.Bin,[2]}})})},t.prototype.toPostChane=function(t){this.info=this.infoList[t.activeIndex]},t.prototype.changeAddress=function(t){this.address=this.addressListDB.find(function(e){return e.LocationID==t.target.value}),this.setInfoList(this.address),this.reloadCarousel()},t.prototype.setInfoList=function(t){var e=this;this.infoList=this.infoListDB.filter(function(e){return e.LocationID==t.LocationID});var n=new Array(this.infoList.length);this.isImgErrList=this.isImgErrList.fill(!1,0,n.length),this.info=this.infoList.find(function(t){return t.Year==e.targetYear}),this.info||(this.info=this.infoList[0])},t.prototype.openModal=function(t){this.isImgErrList[t]||this.modal.nativeElement.show()},t.prototype.goToMenu=function(){this._navigator.nativeElement.pushPage(c.Menu)},t.prototype.goToUpload=function(){this._navigator.nativeElement.pushPage(d.Upload,{data:{LocationID:this.locationId,Address:this.address}})},t.prototype.convertImageSource=function(t){return"data:image/jpg;base64,"+t},t.prototype.reloadCarousel=function(){var t=this,e=this.infoList.findIndex(function(e){return e.PhotoId==t.info.PhotoId});this.carousel.nativeElement.refresh(),this.carousel.nativeElement.setActiveIndex(e)},o([s.ViewChild("carousel"),i("design:type",Object)],t.prototype,"carousel",void 0),o([s.ViewChild("modal"),i("design:type",Object)],t.prototype,"modal",void 0),t=o([s.Component({selector:"ons-page[title='timeTrip']",template:n(198),styles:["\n  .left {\n    float: left;\n    margin-right: 3px;\n  }\n   \n  .item {\n    margin-bottom: 30px;\n  }\n  \n  .title {\n    font-size: 24px;\n    \n  }\n  \n  .material-icons {\n    font-size:35px;\n  }\n  \n  .btn {\n    color: black;\n    background-color: transparent;\n    box-shadow: none;\n    height: 35px;\n    width: 35px;\n    padding: 0px;\n    margin-right: 10px;\n  }\n  \n  .addressSelect{\n    width: calc(100% - 35px - 10px);\n  }\n  \n  .carousel_text {\n    position: absolute; \n    bottom: 0; \n    right: 30px; \n    margin-bottom: 10px;\n    font-size: 30px;\n    color: darkgray;\n  }\n  \n  .carousel_photo {\n    margin: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n  }\n  \n  .carousel_erricon {\n    margin: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 35px;\n    height: 35px;\n  }\n  \n  .photoModal {\n    height: 300px;\n    width: 300px;\n    margin: auto;\n  }\n  \n  .modal_text {\n    position: relative;\n    top: 250px;\n    left: 90px;\n    font-size: 30px;\n    color: dimgray;\n  }\n  \n  #carousel {\n    height: 200px; \n    width: 80%;\n    margin: 0 auto;\n  }"]}),i("design:paramtypes",["function"==typeof(e=void 0!==l.OnsNavigator&&l.OnsNavigator)&&e||Object,"function"==typeof(f=void 0!==u.IndexedDbService&&u.IndexedDbService)&&f||Object,"function"==typeof(p=void 0!==l.Params&&l.Params)&&p||Object])],t)}();e.TimeTrip=f},82:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=n(67),l=n(54),u=n(76),d=n(16),f=function(){function t(t,e,n){this._navigator=t,this._indexedDbService=e,this._params=n,this.photoLocationID="",this.photoAddress="",this.photoYear=0,this.photoComment="",this.photoID=0,this.inputAccept=""}var e,f,h;return t.prototype.ngOnInit=function(){return r(this,void 0,void 0,function(){return a(this,function(t){return this.photoLocationID=this._params.data.LocationID,this.photoAddress=this._params.data.Address,this.inputAccept="image/*",[2]})})},t.prototype.changePhoto=function(t){var e=t.target.files[0],n=new FileReader;n.onload=function(){var t=document.getElementById("photoPreview"),e=btoa(n.result.toString());t.src="data:image/jpeg;base64,"+e},n.readAsBinaryString(e)},t.prototype.uploadPhotoConfirm=function(){var t=this;0!=this.errorCheck()&&d.notification.confirm({title:"確認",message:"写真をアップロードしますか？",cancelable:!0,callback:function(e){1==e&&(t.uploadPhoto(),t.pageChange())}})},t.prototype.uploadPhoto=function(){return r(this,void 0,void 0,function(){var t,e,n,o;return a(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=document.getElementById("photoPreview"),e=null,(e=new p).Year=this.photoYear,e.LocationID=this.photoLocationID,e.Comment=this.photoComment,e.Bin=t.src,[4,this._indexedDbService.addOnePhotoInfo(e)];case 1:return n=i.sent(),this.photoID=Number(n),d.notification.alert({title:"ありがとう！",message:"素敵な写真ですね！"}),[3,3];case 2:return o=i.sent(),console.log(o),[2];case 3:return[2]}})})},t.prototype.pageChange=function(){this._navigator.nativeElement.pages.filter(function(t){return"timetrip"==t.title}).length>0?this._navigator.nativeElement.popPage():this._navigator.nativeElement.replacePage(u.TimeTrip,{data:{LocationID:this.photoLocationID,PhotoID:this.photoID}})},t.prototype.errorCheck=function(){return""==document.getElementById("photoPreview").src?(d.notification.alert({title:"エラー",message:"アップロードする写真を選択してください。"}),!1):null!=this.photoYear||(d.notification.alert({title:"エラー",message:"年を入力してください。"}),!1)},t=o([s.Component({selector:"ons-page[title='upload']",template:n(197),styles:["\n\n  .footer {\n    margin-top: 10px;\n    width: 100%;\n  }\n\n  .btn {\n    color: black;\n    background-color: transparent;\n    box-shadow: none;\n    height: 35px;\n    width: 35px;\n    padding: 0px;\n    margin-right: 10px;\n  }\n\n\n  "]}),i("design:paramtypes",["function"==typeof(e=void 0!==l.OnsNavigator&&l.OnsNavigator)&&e||Object,"function"==typeof(f=void 0!==c.IndexedDbService&&c.IndexedDbService)&&f||Object,"function"==typeof(h=void 0!==l.Params&&l.Params)&&h||Object])],t)}();e.Upload=f;var p=function(){return function(){}}()}},[[397,0,1]]]);